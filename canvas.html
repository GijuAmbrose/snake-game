<!DOCTYPE>
<html>
<head>
<style>
		canvas {border: 10px solid black;}
	</style>
	<h1 style="color: black;text-align: center">SNAKE GAME</h1>	
</head> 	
<body style="background-color:coral">
<div styel = 'margin-left: 70%;'>
	<label style = 'margin-left: 85%;font-size: 20;color: black'>Score:</label> 
	<label id = 'score' style = 'font-size: 25;padding: 15;color: white'>0</label>
	<label style = 'margin-left: 85%;font-size: 20;color: black'>High Score:</label>
	<label id = 'hscore' style = 'font-size: 25;padding: 15;color: white'>0</label>
</div>   
<div align="center" style="margin-top: 25px" id="container" style="text-align: center;"style="position: absolute;">
	<canvas width="1005" height="500" id="myCanvas" style="background: grey;" style="text-align: center">	
	</canvas>
</div>
	
	<script>
		var container = document.getElementById("container");
		var canvas = document.getElementById("myCanvas");
		var ctx = canvas.getContext('2d');
		document.getElementById("hscore").innerText = localStorage.getItem("hscore");
		const unit = 15;
		var snake1 = [];
		snake1[0]={
			x: 10*unit, y: 20*unit 
		};
		snake1[1]={
			x: 12*unit	, y: 20*unit
		};
		snake1[2]={
			x: 14*unit	, y: 20*unit
		};
		snake1[3]={
			x: 16*unit	, y: 20*unit
		};
		ctx.fillStyle = "red";
			ctx.fillRect(snake1[0].x,snake1[0].y, unit, unit);
		for(var i=1;i<snake1.length;i++)
		{	
			ctx.fillStyle = "white";
			ctx.fillRect(snake1[i].x,snake1[i].y, unit, unit);
		}
		var interval,collisionInterval,direction = "",score=0,hscore=0,flag = 0;
		var x1= Math.floor(Math.random()*1000)+1;
		var r = x1%30;
		x1=x1 - r;
		var y1= Math.floor(Math.random()*500)+1;
		var re = y1%30;
		y1=y1 -re;
		ctx.fillStyle="black";
		ctx.fillRect(x1,y1,unit,unit);
		window.addEventListener('keydown', (e) => {
			if (!e.repeat){
				console.log(`Key ${e.keyCode} pressed [event: keydown]`);
			}
			else{
				console.log(`Key "${e.keyCode}" repeating [event: keydown]`);
			}
			if (interval) {
				clearInterval(interval);
			}
			if(flag == 0){
				if(`${e.keyCode}` == '39'){
				alert("press left,up or down !!!!!");
				flag = 1;
				window.reload();
				}
			}
			switch(`${e.keyCode}`){
				case '38':
					if (direction!='down'){
						interval = setInterval(up,100);}
					else{
						interval = setInterval(down,100);	
					}	
					flag = 1;
				break;
				case '40':
					if (direction!='up'){
						interval = setInterval(down, 100);}
					else{
						interval = setInterval(up,100);	
					}
					flag = 1;
				break;
				case '39':
					if (direction!='left'){
						interval = setInterval(right, 100);}
					else{
						interval = setInterval(left,100);	
					}	
					flag = 1;
				break;
				case '37':
					if (direction!='right'){
						interval = setInterval(left, 100);}
					else{
						interval = setInterval(right,100);	
					}	
				break;
				flag = 1;
				case '27':
					alert("Paused....")	
				}
			function up(){
				ctx.clearRect(snake1[snake1.length-1].x,snake1[snake1.length-1].y,unit,unit);
				direction = "up";
				if(snake1[0].y == 0){
					console.log(`${snake1[0].y}`);
					alert("Game end");
					if(localStorage.getItem("hscore") <= score){
						hscore = score;
						localStorage.setItem("hscore", hscore );
						document.getElementById("hscore").innerText = localStorage.getItem("hscore");
					}
					window.location.reload();
					}
				if(snake1[0].x ==x1 && snake1[0].y ==y1){
					ctx.clearRect(x1,y1,unit,unit);
					x1= Math.floor(Math.random()*1000)+1;
					r = x1%30;
					x1=x1 - r;
					y1= Math.floor(Math.random()*500)+1;
					re = y1%30;
					y1=y1 -re;
					score++; 
					hscore++;
					document.getElementById("score").textContent = score;
					for(i=0;i<snake1.length-1;i++){
						if(snake1[i].x ==x1 && snake1[i].y ==y1){
							x1= Math.floor(Math.random()*900)+1;
							 r = x1%30;
							x1=x1 - r;
							 y1= Math.floor(Math.random()*400)+1;
							 re = y1%30;
							y1=y1 -re;
						}
					}
					ctx.fillStyle="black";
					ctx.fillRect(x1,y1,unit,unit);
					for(var i=snake1.length;i>0;i--){
						snake1[i] = snake1[i-1];
					}
					
					snake1[0] = {x: snake1[0].x , y: snake1[0].y - unit*2 };
					console.log(`${snake1.length}`);
				}
				else{
					for(var i=snake1.length-1;i>0;i--){
						snake1[i] = snake1[i-1];
					}
					snake1[0] = {x: snake1[0].x , y: snake1[0].y - unit*2 };
					for(var i=1;i<snake1.length;i++){
						if(snake1[i].x==snake1[0].x && snake1[i].y==snake1[0].y){
							alert("Game end");
							if(localStorage.getItem("hscore")<=score){
								hscore = score;
								localStorage.setItem("hscore", hscore );
								document.getElementById("hscore").innerText = localStorage.getItem("hscore");
							}
						window.location.reload();
						}
					}
				}
			ctx.fillStyle = "red";
			ctx.fillRect(snake1[0].x,snake1[0].y,unit,unit);
			for(var i=1;i<=snake1.length-1;i++){
				console.log(`${snake1[i].x},${snake1[i].y}`);
				ctx.fillStyle = "yellow";
				ctx.fillRect(snake1[i].x,snake1[i].y,unit,unit); 
			}
		}
		function down(){
			ctx.clearRect(snake1[snake1.length-1].x,snake1[snake1.length-1].y,unit,unit);
			direction = "down";
			if(snake1[0].y == 480){
				console.log(`${snake1[0].y}`);
				alert("Game end");
				if(localStorage.getItem("hscore")<=score){
					hscore = score;
					localStorage.setItem("hscore", hscore );
					document.getElementById("hscore").innerText = localStorage.getItem("hscore");
					}
				window.location.reload();
			}
			if(snake1[0].x ==x1 && snake1[0].y ==y1){
				ctx.clearRect(x1,y1,unit,unit);
				x1= Math.floor(Math.random()*900)+1;
				r = x1%30;
				x1=x1 - r;
				y1= Math.floor(Math.random()*400)+1;
				re = y1%30;
				y1=y1 -re;
				score++;
				document.getElementById("score").textContent = score;
				for(i=0;i<snake1.length-1;i++){
					if(snake1[i].x ==x1 && snake1[i].y ==y1){
						x1= Math.floor(Math.random()*900)+1;
						r = x1%30;
						x1=x1 - r;
						y1= Math.floor(Math.random()*400)+1;
						re = y1%30;
						y1=y1 -re;
					}
				}
				ctx.fillStyle="black";
				ctx.fillRect(x1,y1,unit,unit);
				for(var i=snake1.length;i>0;i--){
					snake1[i] = snake1[i-1];
				}
			snake1[0] = {x: snake1[0].x , y: snake1[0].y + unit*2 };
			console.log(`${snake1.length}`);
			}
			else{
				for(var i=snake1.length-1;i>0;i--){
					snake1[i] = snake1[i-1];
				}
				snake1[0] = {x: snake1[0].x , y: snake1[0].y + unit*2 };
				for(var i=1;i<snake1.length;i++){
					if(snake1[i].x==snake1[0].x && snake1[i].y==snake1[0].y){
						alert("Game end");
					if(localStorage.getItem("hscore")<=score){
						hscore = score;
						localStorage.setItem("hscore", hscore );
						document.getElementById("hscore").innerText = localStorage.getItem("hscore");
					}
						window.location.reload();
					}
				}
			}
			ctx.fillStyle = "red";
			ctx.fillRect(snake1[0].x,snake1[0].y,unit,unit);
			for(var i=1;i<=snake1.length-1;i++){
				console.log(`${snake1[i].x},${snake1[i].y}`);
				ctx.fillStyle = "yellow";
				ctx.fillRect(snake1[i].x,snake1[i].y,unit,unit); 
			}
		}
		function right(){
			ctx.clearRect(snake1[snake1.length-1].x,snake1[snake1.length-1].y,unit,unit);
			direction = "right";
			if(snake1[0].x == 990){
				console.log(`${snake1[0].x}`);
				alert("Game end");
				if(localStorage.getItem("hscore")<=score){
					hscore = score;
					localStorage.setItem("hscore", hscore );
					document.getElementById("hscore").innerText = localStorage.getItem("hscore");
				}
				window.location.reload();
			}
			if(snake1[0].x ==x1 && snake1[0].y ==y1){
				ctx.clearRect(x1,y1,unit,unit);
				x1= Math.floor(Math.random()*900)+1;
				r = x1%30;
				x1=x1 - r;
				y1= Math.floor(Math.random()*400)+1;
				re = y1%30;
				y1=y1 -re;
				score++;
				document.getElementById("score").textContent = score;
				for(i=0;i<snake1.length-1;i++){
					if(snake1[i].x ==x1 && snake1[i].y ==y1){
						x1= Math.floor(Math.random()*900)+1;
					 	r = x1%30;
						x1=x1 - r;
					 	y1= Math.floor(Math.random()*400)+1;
					 	re = y1%30;
						y1=y1 -re;
					}
				}
				ctx.fillStyle="black";
				ctx.fillRect(x1,y1,unit,unit);
				for(var i=snake1.length;i>0;i--){
					snake1[i] = snake1[i-1];
				}
				snake1[0] = {x: snake1[0].x+unit*2 , y: snake1[0].y };
				console.log(`${snake1.length}`);
			}
			else{
				for(var i=snake1.length-1;i>0;i--){
					snake1[i] = snake1[i-1];
				}
				snake1[0] = {x: snake1[0].x + unit*2 , y: snake1[0].y   };
				for(var i=1;i<snake1.length;i++){
					if(snake1[i].x==snake1[0].x && snake1[i].y==snake1[0].y){
						alert("Game end");
					if(localStorage.getItem("hscore")<=score){
						hscore = score;
						localStorage.setItem("hscore", hscore );
						document.getElementById("hscore").innerText = localStorage.getItem("hscore");
					}
						window.location.reload();
					}
				}
			}
			ctx.fillStyle = "red";
			ctx.fillRect(snake1[0].x,snake1[0].y,unit,unit);
			for(var i=1;i<=snake1.length-1;i++){
				console.log(`${snake1[i].x},${snake1[i].y}`);
				ctx.fillStyle = "yellow";
				ctx.fillRect(snake1[i].x,snake1[i].y,unit,unit); 
			}
			
		}
		function left(){
			ctx.clearRect(snake1[snake1.length-1].x,snake1[snake1.length-1].y,unit,unit);
			direction = "left";
			if(snake1[0].x == 0){
				console.log(`${snake1[0].x}`);
				alert("Game end");
				if(localStorage.getItem("hscore")<=score){
					hscore = score;
					localStorage.setItem("hscore", hscore );
					document.getElementById("hscore").innerText = localStorage.getItem("hscore");
					}
				window.location.reload();
			}
			if(snake1[0].x ==x1 && snake1[0].y ==y1){
				ctx.clearRect(x1,y1,unit,unit);
				x1= Math.floor(Math.random()*900)+1;
				r = x1%30;
				x1=x1 - r;
				y1= Math.floor(Math.random()*400)+1;
				re = y1%30;
				y1=y1 -re;
				score++;
				document.getElementById("score").textContent = score;
				for(i=0;i<snake1.length-1;i++){
					if(snake1[i].x ==x1 && snake1[i].y ==y1){
						x1= Math.floor(Math.random()*900)+1;
						 r = x1%30;
						x1=x1 - r;
						 y1= Math.floor(Math.random()*400)+1;
						 re = y1%30;
						y1=y1 -re;
					}
				}
				ctx.fillStyle="black";
				ctx.fillRect(x1,y1,unit,unit);
				for(var i=snake1.length;i>0;i--){
					snake1[i] = snake1[i-1];
				}
				snake1[0] = {x: snake1[0].x-unit*2 , y: snake1[0].y  };
				console.log(`${snake1.length}`);
			}
			else{
				for(var i=snake1.length-1;i>0;i--){
					snake1[i] = snake1[i-1];
				}
				snake1[0] = {x: snake1[0].x - unit*2  , y: snake1[0].y};
				for(var i=1;i<snake1.length;i++){
					if(snake1[i].x==snake1[0].x && snake1[i].y==snake1[0].y){
						alert("Game end");
					if(localStorage.getItem("hscore")<=score){
						hscore = score;
						localStorage.setItem("hscore", hscore );
						document.getElementById("hscore").innerText = localStorage.getItem("hscore");
					}
						window.location.reload();
					}
				}
			}
			ctx.fillStyle = "red";
			ctx.fillRect(snake1[0].x,snake1[0].y,unit,unit);
			for(var i=1;i<=snake1.length-1;i++){
				console.log(`${snake1[i].x},${snake1[i].y}`);
				ctx.fillStyle = "yellow";
				ctx.fillRect(snake1[i].x,snake1[i].y,unit,unit); 
			}
		}
		});
	</script>
</body>
</html>