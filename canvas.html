<!DOCTYPE>
<html>
<head>
	<style>
		canvas {border: 5px solid black;}
	</style>
	
</head>
<body>
	<p align="center" style="margin-top: 100px" id="container">
	<canvas width="1000" height="500" id="myCanvas">	
	</canvas>
	</p>
	<p id="console-log"></p>
	<script>
		var container = document.getElementById("container");
		var log = document.getElementById("console-log")
		var canvas = document.getElementById("myCanvas");
		var ctx = canvas.getContext('2d');
		const unit = 15;
		var snake1 = [],snake2 = [],temp=[];
		temp[0]= {x:0,y:0};
		snake1[0]={
			x: 10*unit, y: 20*unit 
		};
		snake1[1]={
			x: 12*unit	, y: 20*unit
		};
		snake1[2]={
			x: 14*unit	, y: 20*unit
		};
		for(var i=0;i<snake1.length;i++)
		{
			ctx.fillRect(snake1[i].x,snake1[i].y, unit, unit);
		}
		var interval,collisionInterval;
		var x1= Math.floor(Math.random()*1000)+1;
		var r = x1%30;
		x1=x1 - r;
		var y1= Math.floor(Math.random()*500)+1;
		var re = y1%30;
		y1=y1 -re;
		window.addEventListener('keydown', (e) => {
			if (!e.repeat){
				console.log(`Key ${e.keyCode} pressed [event: keydown]`);
			}
			else{
				console.log(`Key "${e.keyCode}" repeating [event: keydown]`);
			}
			if (interval) {
				clearInterval(interval);
			}
			
			collisionInterval = setInterval(collision, 100);
			

				switch(`${e.keyCode}`){
					case '38':
						
						interval = setInterval(up,500);
					break;
					case '40':
						
						interval = setInterval(down, 500);
					break;
					case '39':
						
						interval = setInterval(right, 500);
					break;
					case '37':
						
						interval = setInterval(left, 500);
					break;
				}

			/*if (`${e.keyCode}` == 38){
				var upinterval = setInterval(up,2000);
			}
			else if (`${e.keyCode}` == 40){
				var downinterval = setInterval(down, 2000);
			}
			else if (`${e.keyCode}` == 39){
				var rightinterval = setInterval(right, 2000);
			}
			else if (`${e.keyCode}` == 37){
				var leftinterval = setInterval(left,2000);
			}*/





		function collision(){
			ctx.fillRect(x1,y1,15,15);
		}	


		function up(){
			for(var i=0;i<snake1.length-1;i++){
				snake2[0] = {x: snake1[0].x, y: snake1[0].y - unit*2};
				ctx.clearRect(temp[0].x,temp[0].y,unit,unit);
				console.log(`cleared ${temp[0].x}, ${temp[0].y}`);
				ctx.fillRect(snake2[i].x,snake2[i].y,unit,unit);
				console.log(`created ${snake2[i].x}, ${snake2[i].y}`);
				if(snake2[i].y == -30){
					alert("game end");
					window.location.reload();
				}
				if(snake2[0].x == x1 && snake2[0].y ==y1){
					snake1.length = snake1.length+1
					snake1[snake1.length-1] = snake1[snake1.length-2].x, snake1[snake1.length-2].y-unit*2;
					temp[0]= snake1[snake1.length-1];
					clearInterval(collisionInterval);
					
				}
				else{
					temp[0]= snake1[snake1.length-1];
					snake1[snake1.length-1] = snake1[i+1];
					console.log(`last element ${snake1[snake1.length-1].x}, ${snake1[snake1.length-1].y}`);
					snake1[i+1] = snake1[i];
					console.log(`next element ${snake1[i+1].x}, ${snake1[i+1].y}`);
					snake1[0]=snake2[i];
				}

			}
			snake1=snake2;
			
		}
		function down(){
			for(var i=0;i<snake1.length-1;i++){
				snake2[0] = {x: snake1[0].x , y: snake1[0].y + unit*2 };
				ctx.clearRect(temp[0].x,temp[0].y,unit,unit);
				console.log(`cleared ${temp[0].x}, ${temp[0].y}`);
				ctx.fillRect(snake2[i].x,snake2[i].y,unit,unit);
				console.log(`created ${snake2[i].x}, ${snake2[i].y}`);
				if(snake2[i].y == 510){
					alert("game end");
					window.location.reload();
				}


				temp[0]= snake1[snake1.length-1];
				snake1[snake1.length-1] = snake1[i+1];
				console.log(`last element ${snake1[snake1.length-1].x}, ${snake1[snake1.length-1].y}`);
				snake1[i+1] = snake1[i];
				console.log(`next element ${snake1[i+1].x}, ${snake1[i+1].y}`);
				
				snake1[0]=snake2[i];
			}
			snake1=snake2;
		}
		function right(){
			for(var i=0;i<snake1.length-1;i++){
				snake2[0] = {x: snake1[0].x + unit*2, y: snake1[0].y };
				ctx.clearRect(temp[0].x,temp[0].y,unit,unit);
				console.log(`cleared ${temp[0].x}, ${temp[0].y}`);
				ctx.fillRect(snake2[i].x,snake2[i].y,unit,unit);
				console.log(`created ${snake2[i].x}, ${snake2[i].y}`);
				if(snake2[i].x == 1020){
					alert("game end");
					window.location.reload();
				}


				temp[0]= snake1[snake1.length-1];
				snake1[snake1.length-1] = snake1[i+1];
				console.log(`last element ${snake1[snake1.length-1].x}, ${snake1[snake1.length-1].y}`);
				snake1[i+1] = snake1[i];
				console.log(`next element ${snake1[i+1].x}, ${snake1[i+1].y}`);
				
				snake1[0]=snake2[i];
			}
			snake1=snake2;
			
		}
		function left(){
			for(var i=0;i<snake1.length-1;i++){
				snake2[0] = {x: snake1[0].x - unit*2, y: snake1[0].y };
				ctx.clearRect(temp[0].x,temp[0].y,unit,unit);
				console.log(`cleared ${temp[0].x}, ${temp[0].y}`);
				ctx.fillRect(snake2[i].x,snake2[i].y,unit,unit);
				console.log(`created ${snake2[i].x}, ${snake2[i].y}`);
				if(snake2[i].x == -30){
					alert("game end");
					window.location.reload();
				}


				temp[0]= snake1[snake1.length-1];
				snake1[snake1.length-1] = snake1[i+1];
				console.log(`last element ${snake1[snake1.length-1].x}, ${snake1[snake1.length-1].y}`);
				snake1[i+1] = snake1[i];
				console.log(`next element ${snake1[i+1].x}, ${snake1[i+1].y}`);
				
				snake1[0]=snake2[i];
			}
			snake1=snake2;
		}

			

			/*function game() {
				switch(`${e.keyCode}`)
				{
					case '38':
					ctx.fillRect(x, y-50, 50, 50);
				  ctx.clearRect(x, y, 50, 50);
				  y = y - 50;
				  if (y == -50)
					alert("game end");
					break;
					case '39':
					ctx.fillRect(x+50, y, 50, 50);
				  ctx.clearRect(x, y, 50, 50);
				  x = x + 50;
				  if(x == 1000)
					alert("game end");
					break;
					case '37':
					ctx.fillRect(x-50, y, 50, 50);
				  ctx.clearRect(x, y, 50, 50);
				  x = x - 50;
				  if(x == -50)
					alert("game end");
					break;
					case '38':
					ctx.fillRect(x, y+50, 50, 50);
				  ctx.clearRect(x, y, 50, 50);
				  y = y + 50;
				  if (y == 500)
					alert("game end");
					break;
				}

			/*if (`${e.keyCode}`  == '38')
			{
					ctx.fillRect(x, y-50, 50, 50);
				  ctx.clearRect(x, y, 50, 50);
				  y = y - 50;
				  if (y == -50)
					alert("game end");
			}
			else if(`${e.keyCode}`  == '39')
			{
				
						ctx.fillRect(x+50, y, 50, 50);
				  	ctx.clearRect(x, y, 50, 50);
				  	x = x + 50;
				  	if(x == 1000)
						alert("game end");
			}*/
		});
	</script>
</body>
</html>